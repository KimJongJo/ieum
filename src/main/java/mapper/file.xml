<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.file">
	<select id="selectFileByFileNo" parameterType="int" resultType="file">
	    SELECT file_no AS fileNo,
	           file_name AS fileName,
	           file_path AS filePath,
	           file_category AS fileCategory
	    FROM file
	    WHERE file_no = #{fileNo}
	</select>


	<!-- 파일 등록 -->
	<insert id ="insertFile" parameterType="file" useGeneratedKeys="true" keyProperty="fileNo">
		insert into file (file_name, file_path, file_category)
        values (#{fileName}, #{filePath},#{fileCategory})
	</insert>
	
	<!-- 파일 수정 -->
	<update id="updateFile" parameterType="file">
	    update file set 
	        file_name = #{fileName},
	        file_path = #{filePath},
	        file_category = #{fileCategory}
	    where file_no = #{fileNo}
	</update>
	
	<insert id="uploadFile" parameterType="file" useGeneratedKeys="true" keyProperty="fileNo">
		insert into file (file_name, file_path, file_category) values (#{fileName}, #{filePath}, #{fileCategory})
	</insert>
	
	<!-- member-mapper.xml -->
	<update id="updateProfileFile" parameterType="map">
	    UPDATE member
	    SET file_no = #{fileNo}
	    WHERE u_no = #{uNo}
	</update>
</mapper>	