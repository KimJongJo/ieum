<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.reservation">

	<!-- 시간 조회 -->
	<select id="selectResTime" parameterType="map" resultType="reservation">
		select *
		from reservation
		where m_no=#{mNo} and r_date=#{rDate}
	</select>

	<!-- 예약하기 -->
	<insert id="insertReservation" parameterType="reservation">
		insert into
		reservation
		(r_date,r_time,r_content,act_name,act_tel,r_status,r_day,h_no,u_no,m_no)
		values
		(#{rDate},#{rTime},#{rContent},#{actName},#{actTel},#{rStatus},#{rDay},#{hNo},#{uNo},#{mNo})
	</insert>


	<!-- 오늘 예약인 예약 리스트 -->





























	<!-- 유저의 가장 최근 예약건 -->
	<select id="latestRes" parameterType="Integer" resultType="Integer">
		select MAX(r_no)
		from reservation
		where u_no =#{uNo}
	</select>
	
	<!-- 새로운 예약 -->
	<select id="newRes" parameterType="map" resultType="resInfo">
		select *
		from reservation
		join hospital
		using(h_no)
		join member
		using (u_no)
		where u_no=#{uNo} and r_no=#{rNo}
	</select>
	
	<!-- 예약된 의사번호 -->
	<select id="resDocMno" parameterType="Integer" resultType="Integer">
		select m_no
		from reservation
		where r_no=#{rNo}
	</select>
	
	<!-- 다가오는예약 리스트 -->
	<select id="commingRes" parameterType="map" resultType="resInfo">
		select *
		from reservation
		join hospital
		using (h_no)
		join member
		using (u_no)
		where u_no=#{uNo} and r_status=#{rStatus}
		order by ASC
	</select>
	
	<!-- 지난예약 리스트 -->
	<select id="recordRes" parameterType="map" resultType="resInfo">
		select *
		from reservation
		join hospital
		using (h_no)
		join member
		using (u_no)
		where u_no=#{uNo} and r_status=#(rStatus)
		order by DESC
	</select>


</mapper>	