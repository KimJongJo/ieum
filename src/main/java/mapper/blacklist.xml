<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.blacklist">
	<!-- 1. 사용자 차단 기록 삽입 -->
    <insert id="insertBlackList" parameterType="blackList" useGeneratedKeys="true" keyProperty="blackNo">
        INSERT INTO black_list (u_no, blocked_no, black_created)
        VALUES (#{uNo}, #{blockedNo}, NOW())
    </insert>

    <!-- 2. 로그인 사용자가 차단한 사용자 목록 조회 -->
    <select id="getBlockedUsers" parameterType="int" resultType="Integer">
        SELECT blocked_no
        FROM black_list
        WHERE u_no = #{uNo}
    </select>

    <!-- 3. 블랙리스트 + 회원 정보 조회 -->
    <select id="selectBlackWithMember" parameterType="int" resultType="blackMember">
        SELECT m.nickname, m.email, b.black_created, b.u_no, b.blocked_no
        FROM black_list b
        JOIN member m
            ON b.blocked_no = m.u_no
        WHERE b.u_no = #{uNo}
    </select>
    
    
    
    <delete id="deleteBlack" parameterType="map">
	    DELETE FROM black_list
	    WHERE u_no = #{uNo} AND blocked_no = #{blockedNo}
	</delete>
    
</mapper> 		




