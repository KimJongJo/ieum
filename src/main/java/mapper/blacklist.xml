<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.blacklist">
<!-- 댓글 차단 기록 삽입 -->
    <insert id="insertBlackList" parameterType="blackList" useGeneratedKeys="true" keyProperty="blackNo">
        INSERT INTO black_list (u_no, commu_no, comme_no, blocked_no, black_created)
        VALUES (#{uNo}, #{commuNo}, #{commeNo}, #{blockedNo}, NOW())
    </insert>

    <!-- 특정 게시글에서 현재 사용자가 차단한 댓글 조회 (필터용) -->
    <select id="getBlockedComments" parameterType="map" resultType="Integer">
        SELECT comme_no
        FROM black_list
        WHERE u_no = #{uNo} AND commu_no = #{commuNo}
    </select>
	
	
	<!-- blckList.jsp 쓰일 쿼리 -->
	<select id="selectBlackWithMember" parameterType="int" resultType="blackMember">
	    SELECT m.username, m.email, b.black_created
	    FROM member m
	    JOIN black_list b
	      ON m.u_no = b.blocked_no
	    WHERE b.blocked_no = #{uNo};
	</select>
</mapper> 		




